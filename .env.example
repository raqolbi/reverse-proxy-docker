###############################################################################
# ENVIRONMENT CONFIGURATION TEMPLATE (FINAL)
#
# Copy this file to `.env` and adjust values as needed.
# This file documents ALL supported configuration options.
#
# IMPORTANT:
# - This file is read by setup.sh (generator).
# - All values here directly affect generated Nginx & Docker config.
# - Any missing required value will cause setup.sh to FAIL FAST.
###############################################################################


###############################################################################
# GLOBAL NGINX PERFORMANCE
###############################################################################

# Number of worker processes.
# Use "auto" to let Nginx decide based on CPU cores.
NGINX_WORKER_PROCESSES=auto

# Maximum number of connections per worker process.
NGINX_WORKER_CONNECTIONS=2048

# Keep-alive timeout for client connections (seconds).
NGINX_KEEPALIVE_TIMEOUT=65

# Maximum allowed request body size.
NGINX_CLIENT_MAX_BODY_SIZE=20m


###############################################################################
# PROXY TIMEOUTS (GLOBAL DEFAULT)
###############################################################################

# Proxy connection timeout (seconds).
NGINX_PROXY_CONNECT_TIMEOUT=10

# Proxy read timeout (seconds).
NGINX_PROXY_READ_TIMEOUT=60

# Proxy send timeout (seconds).
NGINX_PROXY_SEND_TIMEOUT=60


###############################################################################
# GLOBAL LOGGING
###############################################################################

# Logging mode:
# - stdout : logs go to Docker logs
# - file   : logs are written to host filesystem
NGINX_LOG_MODE=file

# Nginx error_log level.
# Allowed values: debug | info | notice | warn | error | crit
NGINX_ERROR_LOG_LEVEL=warn

# Enable / disable global logs.
NGINX_GLOBAL_ACCESS_LOG=true
NGINX_GLOBAL_ERROR_LOG=true

# Base directory on the HOST for all Nginx logs.
#
# Behavior:
# - setup.sh will attempt to create this directory automatically.
# - If creation fails (permission / FS error), setup.sh WILL STOP.
#
NGINX_LOG_BASE_PATH=/mnt/data/Coding/WebServer/logs


###############################################################################
# RATE LIMITING (GLOBAL)
###############################################################################

# Enable global rate limiting feature.
NGINX_RATE_LIMIT_ENABLED=true

# Shared rate limit zone name.
NGINX_RATE_LIMIT_ZONE_NAME=global_limit

# Request rate per IP.
# Example: 10r/s = 10 requests per second
NGINX_RATE_LIMIT_RATE=10r/s

# Burst size for short traffic spikes.
NGINX_RATE_LIMIT_BURST=20


###############################################################################
# CERTBOT / SSL (GLOBAL)
###############################################################################

# Enable Certbot integration.
CERTBOT_ENABLED=true

# Email address used for Let's Encrypt registration.
CERTBOT_EMAIL=admin@example.com

# Enable automatic certificate renewal container.
CERTBOT_RENEW_ENABLED=true


###############################################################################
# DOCKER / SERVICES
###############################################################################

# Number of backend services to generate.
SERVICE_COUNT=1

# Shared Docker network name.
# This network will be auto-created if missing.
NGINX_NETWORK=shared-net


###############################################################################
# SERVICE 1 CONFIGURATION
###############################################################################

# Docker service name (used as upstream host).
SERVICE_1_NAME=example_service

# Public domain name (optional).
# If empty, domain routing will not be generated.
SERVICE_1_DOMAIN=example.com

# Local / LAN access path (optional).
# Example: /api
#
# IMPORTANT:
# - If SERVICE_X_PATH="/" is used, that service becomes the ROOT.
# - Only ONE service may use "/".
#
SERVICE_1_PATH=/example

# Internal service port (container port).
SERVICE_1_PORT=3000


# -----------------------
# SSL / CERTBOT
# -----------------------

# Enable HTTPS for this service.
SERVICE_1_SSL=true

# Include this service in Certbot auto-renew loop.
# Effective only if CERTBOT_ENABLED=true.
SERVICE_1_CERTBOT_RENEW=true


# -----------------------
# RATE LIMIT
# -----------------------

# Enable rate limiting for this service.
SERVICE_1_RATE_LIMIT=true


# -----------------------
# LOGGING (PER SERVICE)
# -----------------------

# Enable access and error logs for this service.
SERVICE_1_ACCESS_LOG=true
SERVICE_1_ERROR_LOG=true

# Directory on HOST for this service logs.
#
# Behavior:
# - setup.sh will attempt to create this directory automatically.
# - If creation fails, setup.sh WILL STOP.
#
SERVICE_1_LOG_PATH=/mnt/data/Coding/WebServer/logs/example_service
